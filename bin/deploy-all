#! /usr/bin/env bash

set -e

SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" >/dev/null && pwd )"

# -----------------------------------------------------------------------------------------

message() {
    echo
    echo ----------------------------------------------
    echo "$@"
    echo ----------------------------------------------
    echo
}

# -----------------------------------------------------------------------------------------

message CHECKING OUT DEPENDENCIES

dapp update

# -----------------------------------------------------------------------------------------

message DEPLOYING FABS

"$SCRIPT_DIR/deploy-fab"
# shellcheck source=/dev/null
source "$SCRIPT_DIR/../load-fab-$(seth chain)"

# -----------------------------------------------------------------------------------------

message DEPLOYING MCD

"${SCRIPT_DIR}/deploy"
# shellcheck source=/dev/null
source "${SCRIPT_DIR}/../load-mcd-$(seth chain)"

# -----------------------------------------------------------------------------------------

message DEPLOYING ETH

"${SCRIPT_DIR}/deploy-ilk" "ETH-A" "GemJoin" "ETH" "Weth9_"
# shellcheck source=/dev/null
source "${SCRIPT_DIR}/../load-ilk-eth-a-$(seth chain)"

# -----------------------------------------------------------------------------------------
